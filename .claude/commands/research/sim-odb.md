---
description: 'ABAQUS ODB æ•°æ®æå–ä¸åå¤„ç† - æå–åº”åŠ›ã€åº”å˜ã€ä½ç§»ç­‰ç»“æœæ•°æ®'
---

# /sim:odb - ODB åå¤„ç†

$ARGUMENTS

---

## ä¾èµ–èƒ½åŠ›

- `shell.run` - æœ¬åœ°å‘½ä»¤æ‰§è¡Œ (Bash)
- `data.plot` - æ•°æ®å¯è§†åŒ– (ç”¨æˆ·é…ç½®)
- `docs.query` - ABAQUS Scripting Interface æ–‡æ¡£ (context7)

## æ‰§è¡Œæµç¨‹

### 1. ä¸Šä¸‹æ–‡æ£€ç´¢
- è°ƒç”¨ `mcp__ace-tool__search_context` å®šä½ ODB æ–‡ä»¶

### 2. å‚æ•°æ ¡éªŒ
æ£€æŸ¥è¾“å…¥æ˜¯å¦åŒ…å«:
- **ODB æ–‡ä»¶è·¯å¾„**: `.odb` æ–‡ä»¶
- **æå–ç›®æ ‡**: åº”åŠ›ã€åº”å˜ã€ä½ç§»ã€ååŠ›ç­‰
- **è¾“å‡ºæ ¼å¼**: CSVã€JSONã€NPYã€å›¾è¡¨

### 3. è®¡åˆ’é¢„è§ˆ

```markdown
## ğŸ“‹ æ‰§è¡Œè®¡åˆ’

| æ­¥éª¤ | æ“ä½œ | é£é™©ç­‰çº§ |
|------|------|----------|
| 1 | è·å– ODB Scripting API æ–‡æ¡£ | low |
| 2 | Codex ç”Ÿæˆæå–è„šæœ¬ | low |
| 3 | æ‰§è¡Œæå– (abaqus python) | low |
| 4 | Gemini è®¾è®¡å¯è§†åŒ–æ–¹æ¡ˆ (å¯é€‰) | low |
| 5 | ç”Ÿæˆæ•°æ®æ–‡ä»¶ + å›¾è¡¨ | low |

**é¢„è®¡å½±å“**:
- ç”Ÿæˆæ•°æ®æ–‡ä»¶: `artifacts/odb-data/[odb-name]-[field].csv`
- å¯é€‰ç”Ÿæˆå›¾è¡¨: `artifacts/figures/[odb-name]-[field].png`
```

### 4. ç¡®è®¤é—¨æ§
- **é£é™©ç­‰çº§**: low (ä»…è¯»å– ODB)
- **è¡Œä¸º**: auto - è‡ªåŠ¨æ‰§è¡Œ

### 5. æ‰§è¡Œ

#### Step 1: é¢„æ£€ç´¢ ABAQUS Scripting Interface æ–‡æ¡£
ä½¿ç”¨ context7 è·å– ODB API æœ€ä½³å®è·µ:
```javascript
mcp__context7__query-docs({
  libraryId: "/abaqus/scripting",
  query: "ABAQUS ODB æ•°æ®æå–, odbAccess module, åº”åŠ›åº”å˜æå–ç¤ºä¾‹"
})
```

è·å–ç¤ºä¾‹æ–‡æ¡£:
```python
# ABAQUS ODB Access Example (from context7)
from odbAccess import *
odb = openOdb(path='job-1.odb')

# æå–åº”åŠ›æ•°æ®
step = odb.steps['Step-1']
frame = step.frames[-1]  # æœ€åä¸€å¸§
stress = frame.fieldOutputs['S']  # åº”åŠ›
values = stress.values

for v in values:
    print(v.elementLabel, v.mises)  # Mises åº”åŠ›
```

#### Step 2: Codex ç”Ÿæˆæå–è„šæœ¬

**å¹¶è¡Œè°ƒç”¨ Codex (æå–è„šæœ¬) + Gemini (å¯è§†åŒ–è®¾è®¡)** (`run_in_background: true`):

##### Codex Brief (æ•°æ®æå–è„šæœ¬)
```bash
C:/Users/ljh/.claude/bin/codeagent-wrapper.exe --backend codex - "$PWD" <<'EOF'
ROLE_FILE: C:/Users/ljh/.claude/.ccg/prompts/codex/architect.md
<TASK>
ä»»åŠ¡ç±»å‹: ABAQUS ODB æ•°æ®æå–è„šæœ¬
éœ€æ±‚: [ç”¨æˆ·æå–éœ€æ±‚]
ä¸Šä¸‹æ–‡:
- ODB æ–‡ä»¶: [odb-path]
- æå–ç›®æ ‡: [åº”åŠ›, åº”å˜, ä½ç§»]
- è¾“å‡ºæ ¼å¼: [CSV]
- ABAQUS Scripting API æ–‡æ¡£ (from context7):
  [ODB API æœ€ä½³å®è·µ]
ç”Ÿæˆå†…å®¹:
1. Python æå–è„šæœ¬ (ä½¿ç”¨ odbAccess)
2. æ•°æ®æ ¼å¼åŒ–ä¸å¯¼å‡º
3. é”™è¯¯å¤„ç† (æ–‡ä»¶ä¸å­˜åœ¨ã€å­—æ®µç¼ºå¤±ç­‰)
</TASK>
OUTPUT: å®Œæ•´ Python è„šæœ¬
æ³¨æ„äº‹é¡¹:
1. æ£€æŸ¥ ODB æ–‡ä»¶æ˜¯å¦å­˜åœ¨
2. æ£€æŸ¥ç›®æ ‡å­—æ®µæ˜¯å¦å¯ç”¨
3. å¤„ç†å¤šå¸§æ•°æ® (è‹¥éœ€è¦)
4. è¾“å‡ºæ ¼å¼åŒ–ä¸º CSV/JSON
EOF
```

Codex è¿”å›ç¤ºä¾‹è„šæœ¬:
```python
#!/usr/bin/env python
# extract_odb_data.py
# Generated by /sim:odb

from odbAccess import *
import csv

# é…ç½®
ODB_PATH = 'job-1.odb'
OUTPUT_CSV = 'artifacts/odb-data/job-1-stress.csv'
FIELD = 'S'  # åº”åŠ›
COMPONENT = 'mises'  # Mises åº”åŠ›

# æ‰“å¼€ ODB
try:
    odb = openOdb(path=ODB_PATH, readOnly=True)
except Exception as e:
    print(f"ERROR: Cannot open ODB file: {e}")
    exit(1)

# æå–æ•°æ®
try:
    step = odb.steps['Step-1']
    frame = step.frames[-1]  # æœ€åä¸€å¸§

    if FIELD not in frame.fieldOutputs:
        print(f"ERROR: Field '{FIELD}' not found in ODB")
        odb.close()
        exit(1)

    field_output = frame.fieldOutputs[FIELD]
    values = field_output.values

    # å¯¼å‡º CSV
    with open(OUTPUT_CSV, 'w', newline='') as f:
        writer = csv.writer(f)
        writer.writerow(['Element', 'Integration_Point', 'Mises_Stress'])

        for v in values:
            writer.writerow([v.elementLabel, v.integrationPoint, v.mises])

    print(f"SUCCESS: Exported {len(values)} data points to {OUTPUT_CSV}")

except Exception as e:
    print(f"ERROR: Data extraction failed: {e}")

finally:
    odb.close()
```

##### Gemini Brief (å¯è§†åŒ–è®¾è®¡,å¯é€‰)
è‹¥ç”¨æˆ·è¯·æ±‚å¯è§†åŒ– (`--plot`):
```bash
C:/Users/ljh/.claude/bin/codeagent-wrapper.exe --backend gemini - "$PWD" <<'EOF'
ROLE_FILE: C:/Users/ljh/.claude/.ccg/prompts/gemini/analyzer.md
<TASK>
ä»»åŠ¡ç±»å‹: ODB æ•°æ®å¯è§†åŒ–è®¾è®¡
éœ€æ±‚: è®¾è®¡æ¸…æ™°çš„ç»“æœå¯è§†åŒ–æ–¹æ¡ˆ
ä¸Šä¸‹æ–‡:
- æ•°æ®ç±»å‹: [åº”åŠ›åˆ†å¸ƒ]
- æ•°æ®æ ¼å¼: CSV (Element, Integration_Point, Mises_Stress)
å…³æ³¨ç‚¹:
- å¯è§†åŒ–ç±»å‹å»ºè®® (äº‘å›¾ã€æ›²çº¿ã€æŸ±çŠ¶å›¾)
- é…è‰²æ–¹æ¡ˆ (colormap é€‰æ‹©)
- æ ‡æ³¨ç­–ç•¥ (é«˜äº®æœ€å¤§/æœ€å°å€¼)
- å¸ƒå±€è®¾è®¡ (å•å›¾ vs å¤šå­å›¾)
</TASK>
OUTPUT: Markdown æ ¼å¼å¯è§†åŒ–è®¾è®¡
# å¯è§†åŒ–è®¾è®¡å»ºè®®
## æ¨èå›¾è¡¨ç±»å‹
- ä¸»å›¾: åº”åŠ›äº‘å›¾ (çƒ­åŠ›å›¾)
- è¾…å›¾: åº”åŠ›åˆ†å¸ƒç›´æ–¹å›¾
## é…è‰²æ–¹æ¡ˆ
- Colormap: jet (è“â†’ç»¿â†’é»„â†’çº¢)
- é«˜äº®æœ€å¤§åº”åŠ›ç‚¹: çº¢è‰²æ ‡è®°
## Python ä»£ç æ¡†æ¶
[matplotlib ç¤ºä¾‹ä»£ç ]
EOF
```

#### Step 3: æ‰§è¡Œæå–è„šæœ¬
```bash
abaqus python extract_odb_data.py
```

#### Step 4: ç”Ÿæˆå¯è§†åŒ– (å¯é€‰)
è‹¥ç”¨æˆ·å¯ç”¨ `--plot`:
```python
import pandas as pd
import matplotlib.pyplot as plt
import numpy as np

# è¯»å–æå–çš„æ•°æ®
df = pd.read_csv('artifacts/odb-data/job-1-stress.csv')

# ç»˜åˆ¶åº”åŠ›åˆ†å¸ƒç›´æ–¹å›¾
plt.figure(figsize=(10, 6))
plt.hist(df['Mises_Stress'], bins=50, color='steelblue', edgecolor='black')
plt.xlabel('Mises Stress (Pa)')
plt.ylabel('Frequency')
plt.title('Stress Distribution')
plt.grid(True, alpha=0.3)
plt.savefig('artifacts/figures/job-1-stress-dist.png', dpi=300)
print("Plot saved to artifacts/figures/job-1-stress-dist.png")
```

### 6. ç»“æœå‘ˆç°

```markdown
## âœ… ODB æ•°æ®æå–å®Œæˆ

### æå–æ‘˜è¦
- ODB æ–‡ä»¶: `job-1.odb`
- æå–å­—æ®µ: Mises åº”åŠ› (S, mises)
- æ•°æ®ç‚¹æ•°: 12,345
- æœ€å¤§åº”åŠ›: 3.45e8 Pa (å•å…ƒ #6789)
- æœ€å°åº”åŠ›: 1.23e5 Pa (å•å…ƒ #1234)

### ç”Ÿæˆæ–‡ä»¶
- æ•°æ®æ–‡ä»¶: `artifacts/odb-data/job-1-stress.csv`
- æå–è„šæœ¬: `scripts/extract_odb_data.py`
- å¯è§†åŒ–å›¾è¡¨: `artifacts/figures/job-1-stress-dist.png` (è‹¥å¯ç”¨)

### æ•°æ®é¢„è§ˆ
| Element | Integration_Point | Mises_Stress (Pa) |
|---------|-------------------|-------------------|
| 1       | 1                 | 1.23e5            |
| 2       | 1                 | 2.34e5            |
| ...     | ...               | ...               |
| 12345   | 4                 | 3.45e8            |

### ç»Ÿè®¡ä¿¡æ¯
- å¹³å‡åº”åŠ›: 1.23e7 Pa
- æ ‡å‡†å·®: 4.56e6 Pa
- ç¬¬ 95 ç™¾åˆ†ä½: 2.34e7 Pa

### åç»­æ“ä½œ
- æ•°æ®åˆ†æ: `/data:process artifacts/odb-data/job-1-stress.csv`
- å¯¹æ¯”ä»¿çœŸä¸å®æµ‹: `/data:compare --sim job-1-stress.csv --exp measured-data.csv`
- å¯è§†åŒ–: `python scripts/plot_stress.py` (è‹¥å·²ç”Ÿæˆ)
```

---

## æå–å­—æ®µ

### åº”åŠ› (Stress)
```bash
/sim:odb job-1.odb --field S --component mises
/sim:odb job-1.odb --field S --component S11,S22,S33  # ä¸»åº”åŠ›åˆ†é‡
```

### åº”å˜ (Strain)
```bash
/sim:odb job-1.odb --field E --component E11,E22,E33
/sim:odb job-1.odb --field E --component mises  # Mises åº”å˜
```

### ä½ç§» (Displacement)
```bash
/sim:odb job-1.odb --field U --component U1,U2,U3  # ä½ç§»åˆ†é‡
/sim:odb job-1.odb --field U --component magnitude  # ä½ç§»å¹…å€¼
```

### ååŠ› (Reaction Force)
```bash
/sim:odb job-1.odb --field RF --component RF1,RF2,RF3
```

### è‡ªå®šä¹‰å­—æ®µ
```bash
/sim:odb job-1.odb --field CUSTOM_FIELD --component VALUE
```

---

## è¾“å‡ºæ ¼å¼

### CSV (é»˜è®¤)
```bash
/sim:odb job-1.odb --field S --output csv
```

### JSON
```bash
/sim:odb job-1.odb --field S --output json
```

### NumPy Array (.npy)
```bash
/sim:odb job-1.odb --field S --output npy
```

### HDF5 (å¤§æ•°æ®é›†)
```bash
/sim:odb job-1.odb --field S --output h5
```

---

## é«˜çº§åŠŸèƒ½

### å¤šå¸§æå–
```bash
# æå–æ‰€æœ‰å¸§
/sim:odb job-1.odb --field U --all-frames

# æå–ç‰¹å®šå¸§èŒƒå›´
/sim:odb job-1.odb --field U --frames 0,10,20,50,-1
```

### ç‰¹å®šåŒºåŸŸæå–
```bash
# ä»…æå–ç‰¹å®šèŠ‚ç‚¹é›†
/sim:odb job-1.odb --field U --node-set SET-1

# ä»…æå–ç‰¹å®šå•å…ƒé›†
/sim:odb job-1.odb --field S --element-set REGION-A
```

### æ‰¹é‡æå–
```bash
# æå–å¤šä¸ªå­—æ®µ
/sim:odb job-1.odb --fields S,E,U --output csv

# æ‰¹é‡å¤„ç†å¤šä¸ª ODB
/sim:odb --batch *.odb --field S --output csv
```

### è·¯å¾„æå– (Path Data)
```bash
# æ²¿æŒ‡å®šè·¯å¾„æå–æ•°æ®
/sim:odb job-1.odb --path "Node 1 to Node 100" --field S
```

---

## å¯è§†åŒ–é€‰é¡¹

### åŸºç¡€å›¾è¡¨
```bash
# è‡ªåŠ¨ç”Ÿæˆåˆ†å¸ƒç›´æ–¹å›¾
/sim:odb job-1.odb --field S --plot histogram

# ç”Ÿæˆåº”åŠ›äº‘å›¾
/sim:odb job-1.odb --field S --plot contour
```

### æ—¶é—´å†ç¨‹æ›²çº¿
```bash
# ç»˜åˆ¶ç‰¹å®šèŠ‚ç‚¹çš„ä½ç§»å†ç¨‹
/sim:odb job-1.odb --field U --node 123 --all-frames --plot timeseries
```

### 3D å¯è§†åŒ–
```bash
# ç”Ÿæˆ 3D åº”åŠ›äº‘å›¾ (éœ€è¦ VTK)
/sim:odb job-1.odb --field S --plot 3d --output-format vtk
```

---

## å¤šæ¨¡å‹åä½œ

**åä½œæ¨¡å¼**: Codex + Gemini äº¤å‰éªŒè¯ (è‹¥å¯ç”¨å¯è§†åŒ–)

| æ¨¡å‹ | èŒè´£ | è¾“å‡º |
|------|------|------|
| **Context7** | æä¾› ABAQUS Scripting API æ–‡æ¡£ | API å‚è€ƒ + ç¤ºä¾‹ |
| **Codex** | ç”Ÿæˆæ•°æ®æå–è„šæœ¬ | Python è„šæœ¬ (odbAccess) |
| **Gemini** | è®¾è®¡å¯è§†åŒ–æ–¹æ¡ˆ (è‹¥å¯ç”¨ --plot) | å¯è§†åŒ–ä»£ç  + é…è‰²å»ºè®® |
| **Claude** | é¢„æ£€ç´¢æ–‡æ¡£ã€æ‰§è¡Œè„šæœ¬ã€ç”ŸæˆæŠ¥å‘Š | æ•°æ®æ–‡ä»¶ + å›¾è¡¨ |

---

## ç¤ºä¾‹

### ç¤ºä¾‹ 1: æå– Mises åº”åŠ›
```bash
/sim:odb job-1.odb --field S --component mises --output csv
```

### ç¤ºä¾‹ 2: æå–ä½ç§»å¹¶å¯è§†åŒ–
```bash
/sim:odb job-1.odb --field U --component magnitude --plot histogram
```

### ç¤ºä¾‹ 3: æ‰¹é‡æå–å¤šä¸ª ODB
```bash
/sim:odb --batch model_param_*.odb --field S --component mises --output csv
```

### ç¤ºä¾‹ 4: æå–æ—¶é—´å†ç¨‹
```bash
/sim:odb job-1.odb --field U --node 123 --all-frames --output csv --plot timeseries
```

---

## é”™è¯¯å¤„ç†

| é”™è¯¯ç±»å‹ | å¤„ç†ç­–ç•¥ |
|----------|----------|
| ODB æ–‡ä»¶æœªæ‰¾åˆ° | æç¤ºç”¨æˆ·æ£€æŸ¥è·¯å¾„æˆ–ä½¿ç”¨ `/sim:batch` æŸ¥çœ‹ä½œä¸šçŠ¶æ€ |
| å­—æ®µä¸å­˜åœ¨ | åˆ—å‡º ODB ä¸­å¯ç”¨çš„å­—æ®µ |
| ODB æ–‡ä»¶æŸå | å»ºè®®é‡æ–°è¿è¡Œä»¿çœŸæˆ–ä½¿ç”¨ `abaqus recover` |
| æå–è„šæœ¬æ‰§è¡Œå¤±è´¥ | æ˜¾ç¤ºå®Œæ•´é”™è¯¯æ—¥å¿—,å»ºè®®æ‰‹åŠ¨è°ƒè¯• |

---

## å‚è€ƒ

- å…±äº«åè®®: `.claude/commands/research/_protocol.md`
- èƒ½åŠ›é…ç½®: `.claude/.research/capabilities.yaml`
- ABAQUS Scripting Reference: (ç”± context7 åŠ¨æ€è·å–)
- æ•°æ®åˆ†æ: `/data:process`
- ä»¿çœŸ-å®æµ‹å¯¹æ¯”: `/data:compare`
