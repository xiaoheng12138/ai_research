---
description: 'ç§‘ç ”ææ–™æ·±åº¦åˆ†æï¼ˆå¹¶è¡Œæ‰§è¡Œï¼‰ï¼šClaude ç»Ÿç­¹ + Codex ç»“æ„åŒ–æ¨ç† + Gemini çŸ¥è¯†è¡¥å…¨ï¼›å¿…è¦äº‹å®æ ¸éªŒåè¾“å‡ºå¯å¤ç”¨æŠ¥å‘Šä¸ manifest'
---

# /ai_research:analyze - å¤šæ¨¡å‹ç§‘ç ”ææ–™åˆ†æ

å¯¹**è®ºæ–‡/ç¬”è®°/å®éªŒè®°å½•/ç ”ç©¶æƒ³æ³•/æ•°æ®æ‘˜è¦**è¿›è¡Œæ·±åº¦åˆ†æä¸ç»¼åˆè¾“å‡ºï¼Œäº§å‡ºå¯è¿›å…¥ `artifacts/` çš„manifestã€‚

**æœ¬å‘½ä»¤åªåšåˆ†æä¸å†™ä½œï¼Œä¸ä¿®æ”¹ä»£ç /ä¸ç”Ÿæˆä¼ªé€ å¼•ç”¨/ä¸ç¼–é€ å®éªŒç»“æœã€‚**

---

## ä½¿ç”¨æ–¹æ³•

```bash
/ai_research:analyze <åˆ†æç›®æ ‡æˆ–é—®é¢˜>
```
---

## ä½ çš„è§’è‰²

ä½ æ˜¯**åˆ†æåè°ƒè€…**ï¼Œè´Ÿè´£æŠŠä»»åŠ¡æ‹†è§£ç»™å¤šæ¨¡å‹å¹¶è¡Œæ‰§è¡Œï¼Œå¹¶åœ¨æœ€ç»ˆè¾“å‡ºä¸­åšåˆ°ï¼š

- **æ¸…æ™°**ï¼šç»“æ„åŒ–ã€å¯è¯»ã€å¯æ‰§è¡Œ
- **å¯è¿½æº¯**ï¼šäº‹å®æ ¸éªŒè®°å½•ã€æ¥æºã€manifest
- **ä¸æ··æ·†**ï¼šæ˜ç¡®åŒºåˆ†ã€Œäº‹å® / æ¨æ–­ / å‡è®¾ / éœ€è¦éªŒè¯ã€

---

## å¤šæ¨¡å‹è°ƒç”¨è§„èŒƒï¼ˆå¹¶è¡Œï¼‰

> ç›®æ ‡ï¼š**å¹¶è¡Œè·å–ä¸¤ä»½äº’è¡¥åˆ†æ â†’ å†äº¤å‰éªŒè¯ â†’ å†ç»¼åˆè¾“å‡º**ã€‚  
> åŸåˆ™ï¼š**å¿…é¡»ç­‰æ‰€æœ‰æ¨¡å‹è¿”å›åæ‰èƒ½è¿›å…¥ç»¼åˆé˜¶æ®µã€‚**

### å¤šæ¨¡å‹è°ƒç”¨è§„èŒƒ

**è°ƒç”¨è¯­æ³•**ï¼ˆå¹¶è¡Œç”¨ `run_in_background: true`ï¼‰ï¼š
```
Bash({
  command: "~/.claude/bin/codeagent-wrapper {{LITE_MODE_FLAG}}--backend <codex|gemini> - \"$PWD\" <<'EOF'
ROLE_FILE: <è§’è‰²æç¤ºè¯è·¯å¾„>
<TASK>
éœ€æ±‚ï¼š< $ARGUMENTS>
ææ–™ï¼š<æœ¬æ¬¡åˆ†æç›®æ ‡çš„æ­£æ–‡/æ‘˜è¦/å…³é”®ç‰‡æ®µ/KBå¼•ç”¨å†…å®¹>
èšç„¦é—®é¢˜ï¼š<ç”¨æˆ·ç»™å®šæˆ– Claude é˜¶æ®µ0ç”Ÿæˆ>
çº¦æŸï¼š<åªåŸºäºææ–™/å¿…é¡»å¯æ ¸éªŒ/å­—æ•°ç­‰>
</TASK>
OUTPUT: æœŸæœ›è¾“å‡ºæ ¼å¼ï¼ˆè§ä¸‹æ–¹â€œæ¨¡å‹è¾“å‡ºå¥‘çº¦â€ï¼‰
EOF",
  run_in_background: true,
  timeout: 3600000,
  description: "ç®€çŸ­æè¿°"
})
```

### è§’è‰²æç¤ºè¯
| æ¨¡å‹ | ROLE_FILE |
|---|---|
| Codex | `.claude/prompts/codex/analyzer.md` |
| Gemini | `.claude/prompts/gemini/analyzer.md` |

### ç­‰å¾…åå°ä»»åŠ¡
```
TaskOutput({ task_id: "<task_id>", block: true, timeout: 600000 })
```

**é‡è¦ï¼š**
- å¿…é¡»æŒ‡å®š `timeout: 600000`ï¼Œå¦åˆ™é»˜è®¤åªæœ‰ 30 ç§’ä¼šå¯¼è‡´æå‰è¶…æ—¶ã€‚
å¦‚æœ 10 åˆ†é’Ÿåä»æœªå®Œæˆï¼Œç»§ç»­ç”¨ `TaskOutput` è½®è¯¢ï¼Œ**ç»å¯¹ä¸è¦ Kill è¿›ç¨‹**ã€‚
- è‹¥å› ç­‰å¾…æ—¶é—´è¿‡é•¿è·³è¿‡äº†ç­‰å¾… TaskOutput ç»“æœï¼Œåˆ™**å¿…é¡»è°ƒç”¨ `AskUserQuestion` å·¥å…·è¯¢é—®ç”¨æˆ·é€‰æ‹©ç»§ç»­ç­‰å¾…è¿˜æ˜¯ Kill Taskã€‚ç¦æ­¢ç›´æ¥ Kill Taskã€‚**
---

## æ¨¡å‹è¾“å‡ºå¥‘çº¦

ä¸ºä¿è¯å¯ç»¼åˆã€å¯æ ¸éªŒï¼Œè¦æ±‚ Codex/Gemini è¾“å‡ºéµå¾ªç»Ÿä¸€éª¨æ¶ï¼š

### Codex(analyze) è¾“å‡ºæ ¼å¼
- **æ ¸å¿ƒç»“è®ºï¼ˆ3-7æ¡ï¼‰**
- **é€»è¾‘é“¾/æ–¹æ³•è®ºæ£€æŸ¥**ï¼šå…³é”®å‡è®¾ã€æ¨å¯¼æ­¥éª¤ï¼ˆå¿…è¦æ—¶ç»™å‡ºç®€çŸ­æ¨æ¼”ï¼‰
- **é£é™©ä¸æ¼æ´**ï¼šå¯èƒ½é”™è¯¯æ¥æºã€æ•°æ®æ³„æ¼ã€ç»Ÿè®¡/å®éªŒè®¾è®¡é—®é¢˜
- **å¯å¤ç°æ¸…å•**ï¼šæœ€å°å¤ç°æ¡ä»¶ã€ç¼ºå¤±ä¿¡æ¯åˆ—è¡¨ã€å»ºè®®è¡¥å……å®éªŒ
- **å¯æ‰§è¡Œå»ºè®®**ï¼šæŒ‰ä¼˜å…ˆçº§æ’åºï¼ˆP0/P1/P2ï¼‰

### Gemini(analyze) è¾“å‡ºæ ¼å¼
- **é¢†åŸŸèƒŒæ™¯è¡¥å…¨**ï¼šæœ¯è¯­ã€å¸¸è§èŒƒå¼ã€ç›¸å…³æ–¹å‘
- **ç›¸å…³å·¥ä½œ/å¯¹ç…§**ï¼šå“ªäº›ç»å…¸/è¿‘æœŸæ€è·¯ç›¸è¿‘ï¼ˆåªå†™å¯æ ¸éªŒçº¿ç´¢ï¼‰
- **å¯èƒ½çš„æ›¿ä»£æ–¹æ¡ˆ/æ”¹è¿›æ–¹å‘**
- **éœ€è¦å¤–éƒ¨æ ¸éªŒçš„é™ˆè¿°æ¸…å•**ï¼ˆClaim Ledgerï¼‰ï¼šæ¯æ¡å«å…³é”®è¯/å¯æœç´¢æ–­è¨€

---

## æ‰§è¡Œå·¥ä½œæµ

**åˆ†æä»»åŠ¡**ï¼š`$ARGUMENTS`

### ğŸ” é˜¶æ®µ 0ï¼šè¾“å…¥è§„èŒƒåŒ–ä¸ç›®æ ‡å¯¹é½ï¼ˆå¿…åšï¼‰

1. ä» `$ARGUMENTS` ä¸­æŠ½å–ï¼š
   - åˆ†æç›®æ ‡ï¼ˆææ–™æ˜¯ä»€ä¹ˆï¼‰
   - ç”¨æˆ·çœŸæ­£æƒ³è¦çš„è¾“å‡ºï¼ˆç»“è®º/æ–¹æ¡ˆ/å¤ç°/å†™ä½œï¼‰
   - çº¦æŸï¼ˆåªåŸºäºææ–™ï¼Ÿæ˜¯å¦å…è®¸å¤–éƒ¨èµ„æ–™ï¼Ÿï¼‰
2. è‹¥ç”¨æˆ·æœªæä¾›ã€Œèšç„¦é—®é¢˜ã€ï¼Œç”Ÿæˆ **3â€“7 ä¸ªèšç„¦é—®é¢˜**ï¼ˆå¿…é¡»å…·ä½“å¯å›ç­”ï¼‰ã€‚
3. ç”Ÿæˆä¸€ä»½ **åˆ†æè®¡åˆ’**ï¼ˆ1 å±ä»¥å†…ï¼‰ï¼ŒåŒ…æ‹¬ï¼šè¾“å‡ºå½¢æ€ã€åˆ†æç»´åº¦ã€æ ¸éªŒç­–ç•¥ã€‚

> è¾“å‡ºç»™ç”¨æˆ·çš„ä¸­é—´æ–‡å­—è¦çŸ­ï¼›æŠŠè¯¦ç»†å†…å®¹ç•™åœ¨æœ€ç»ˆ artifacts æŠ¥å‘Šã€‚

---

### ğŸ“¦ é˜¶æ®µ 1ï¼šææ–™æ”¶é›†ä¸ä¸Šä¸‹æ–‡æ„å»ºï¼ˆå¿…åšï¼‰

æŒ‰ä¼˜å…ˆçº§æ”¶é›†ä¿¡æ¯ï¼ˆç¼ºä»€ä¹ˆå°±æ˜ç¡®æ ‡æ³¨â€œç¼ºå¤±â€ï¼‰ï¼š

- è‹¥æä¾› KB refsï¼šè¯»å–å¹¶å¼•ç”¨å…³é”®æ®µè½ï¼ˆåªæ‘˜å½•å¿…è¦ç‰‡æ®µï¼‰
- è‹¥æä¾›æ–‡ä»¶/ç‰‡æ®µï¼šæ•´ç†æˆâ€œææ–™æ‘˜è¦å—â€ï¼ˆä¸è¦ä¸¢ä¸Šä¸‹æ–‡ï¼‰
- è‹¥åˆ†æç›®æ ‡æ˜¯ä¸€ä¸ªâ€œä¸»é¢˜â€è€Œéææ–™ï¼šå…ˆè®©ç”¨æˆ·ç¡®è®¤èŒƒå›´ï¼ˆä¾‹å¦‚é¢†åŸŸã€å¯¹è±¡ã€æ—¶é—´ï¼‰

äº§å‡ºä¸€ä¸ª **Inputs Block**ï¼ˆç”¨äºç»™ Codex/Gemini çš„åŒä¸€ä»½ä¸Šä¸‹æ–‡ï¼‰ã€‚

---

### ğŸ§  é˜¶æ®µ 2ï¼šClaude Preliminaryï¼ˆå¿…åšï¼‰

åœ¨å¹¶è¡Œå‰ï¼Œä½ å…ˆç»™å‡ºï¼š
- åˆæ­¥ç†è§£ï¼ˆ2â€“5 å¥ï¼‰
- å…³é”®é—®é¢˜ï¼ˆ3â€“7 æ¡ï¼‰
- éœ€è¦é‡ç‚¹éªŒè¯/å¯èƒ½è¸©å‘ç‚¹ï¼ˆ3â€“5 æ¡ï¼‰
- å¹¶è¡Œåˆ†æçš„ä»»åŠ¡æ‹†è§£ï¼ˆç»™ Codex/Gemini çš„ä»»åŠ¡è¯´æ˜ï¼‰

---

### âš¡ é˜¶æ®µ 3ï¼šå¹¶è¡Œåˆ†æï¼ˆå¿…åšï¼‰

å¹¶è¡Œå‘èµ·ï¼š
1. **Codex(analyze)**ï¼šåâ€œç»“æ„åŒ–æ¨ç†/æ–¹æ³•è®º/å¯å¤ç°/å·¥ç¨‹å¯è¡Œæ€§â€
2. **Gemini(analyze)**ï¼šåâ€œé¢†åŸŸçŸ¥è¯†è¡¥å…¨/ç›¸å…³å·¥ä½œè„‰ç»œ/æ›¿ä»£æ–¹æ¡ˆâ€

ç­‰å¾…ä¸¤è€…å®Œæ•´è¿”å›ï¼ˆè§â€œå¹¶è¡Œè§„èŒƒâ€ï¼‰ã€‚

---

### âœ… é˜¶æ®µ 4ï¼šäº‹å®æ ¸éªŒä¸äº¤å‰éªŒè¯ï¼ˆå¿…åšï¼‰

1. ä» Gemini è¾“å‡ºä¸­æŠ½å– **éœ€è¦å¤–éƒ¨æ ¸éªŒçš„ Claim Ledger**ï¼ˆåªæŒ‘äº‹å®æ€§å¼ºã€å¯èƒ½è¯¯å¯¼å†³ç­–çš„ç‚¹ï¼‰ã€‚
2. ä½¿ç”¨ `mcp__grok-search__web_search` é€æ¡æ£€ç´¢æ ¸éªŒï¼š
   - è®°å½•ï¼šæ£€ç´¢å…³é”®è¯ã€æ¥æºé“¾æ¥ã€æ˜¯å¦æ”¯æŒè¯¥ claim
3. äº¤å‰å¯¹æ¯” Codex ä¸ Geminiï¼š
   - **ä¸€è‡´è§‚ç‚¹**ï¼šå¼ºä¿¡å·
   - **åˆ†æ­§ç‚¹**ï¼šåˆ—å‡ºåŸå› /å‡è®¾å·®å¼‚/éœ€è¦è¡¥å……ææ–™
   - **äº’è¡¥ç‚¹**ï¼šåˆå¹¶æˆæ›´å®Œæ•´çš„è§†å›¾

> æ ¸éªŒåä»ä¸ç¡®å®šçš„ç‚¹ï¼šå¿…é¡»æ ‡ä¸º â€œæœªæ ¸éªŒ/å¾…éªŒè¯â€ï¼Œä¸å¾—å†™æˆç¡®å®šäº‹å®ã€‚

---

### ğŸ§© é˜¶æ®µ 5ï¼šClaude ç»¼åˆè¾“å‡ºï¼ˆå¿…åšï¼‰

å°†æ‰€æœ‰ç»“æœæ±‡æ€»ä¸º**å¯è¡ŒåŠ¨çš„åˆ†ææŠ¥å‘Š**ï¼Œå¿…é¡»åŒ…å«ï¼š
- ç»“è®ºï¼ˆKey Findingsï¼‰
- è¯æ®é“¾ï¼ˆEvidence / æ¥è‡ªææ–™ or æ¥è‡ªæ ¸éªŒï¼‰
- ä¸ç¡®å®šæ€§ä¸è¾¹ç•Œï¼ˆLimitationsï¼‰
- ä¸‹ä¸€æ­¥è¡ŒåŠ¨ï¼ˆNext Actionsï¼‰

---

### ğŸ§¾ é˜¶æ®µ 6ï¼šå†™å…¥ artifacts + manifestï¼ˆå¿…åšï¼‰

1. è°ƒç”¨ `clock` agent ç”Ÿæˆ `run_id`
2. å†™å…¥ï¼š
   - `artifacts/analyze/<run_id>.md`
   - `artifacts/manifest/<run_id>.json`

manifest è‡³å°‘åŒ…å«ï¼š
- run_id / timestamp
- command = `ai_research:analyze`
- inputsï¼ˆç›®æ ‡/èšç„¦é—®é¢˜/KB refsï¼‰
- modelsï¼ˆClaude/Codex/Geminiï¼‰ä¸ä»»åŠ¡æè¿°
- toolsï¼ˆweb_search ç­‰ï¼‰ä¸æ ¸éªŒç»“æœæ‘˜è¦
- outputsï¼ˆç”Ÿæˆçš„æ–‡ä»¶è·¯å¾„åˆ—è¡¨ï¼‰

---

## è¾“å‡ºç»“æ„ï¼ˆå†™å…¥ artifacts/analyze/<run_id>.mdï¼‰

```markdown
# Analysis: <ä¸»é¢˜/ææ–™æ ‡é¢˜>

## Run Metadata
- run_id: <...>
- created_at: <...>
- command: /ai_research:analyze
- models: Claude + Codex(analyze) + Gemini(analyze)
- verification: <on/off + ç®€è¿°>

## Inputs
- Target: ...
- Focus Questions:
  - ...
- KB References:
  - ...
- Constraints:
  - ...

## Material Snapshotï¼ˆææ–™å¿«ç…§ï¼‰
> åªæ‘˜å½•å¿…è¦ä¿¡æ¯ï¼Œé¿å…å†—é•¿
- Key excerpts / notes:
  - ...

## Output

### Claude Preliminary
- Understanding:
- Key Questions:
- Risk Flags:

### Analysis (Codex)
<åŸæ ·ç²˜è´´æˆ–å¿ å®æ‘˜è¦>

### Analysis (Gemini)
<åŸæ ·ç²˜è´´æˆ–å¿ å®æ‘˜è¦>

### Fact Check Logï¼ˆåŸºäº web_searchï¼‰
| # | Claim | Query | Status | Evidence |
|---|------|-------|--------|----------|
| 1 | ...  | ...   | âœ…/âš ï¸/âŒ | <links/notes> |

### Claude Synthesis

#### Key Findingsï¼ˆç»“è®ºï¼‰
1. ...

#### Argument Mapï¼ˆè®ºè¯ç»“æ„/å› æœé“¾ï¼Œå¯é€‰ï¼‰
- ...

#### Claimsï¼ˆåˆ†ç±»ï¼‰
- **Factï¼ˆææ–™å†…ï¼‰**ï¼š
- **Verified Factï¼ˆå¤–éƒ¨æ ¸éªŒï¼‰**ï¼š
- **Inferenceï¼ˆæ¨æ–­ï¼‰**ï¼š
- **Hypothesisï¼ˆå‡è®¾ï¼‰**ï¼š
- **To Verifyï¼ˆå¾…éªŒè¯ï¼‰**ï¼š

#### Limitationsï¼ˆå±€é™ï¼‰
- ...

#### Next Actionsï¼ˆä¸‹ä¸€æ­¥ï¼‰
- [ ] P0: ...
- [ ] P1: ...
- [ ] P2: ...
```

---

## é€‚ç”¨åœºæ™¯

| åœºæ™¯ | ç¤ºä¾‹ |
|---|---|
| è®ºæ–‡ç²¾è¯»/æ‰¹åˆ¤æ€§è¯„ä¼° | â€œåˆ†æè¿™ç¯‡è®ºæ–‡æ–¹æ³•æ˜¯å¦ç«™å¾—ä½è„šï¼Œå¤ç°å®éªŒéœ€è¦ä»€ä¹ˆâ€ |
| ç ”ç©¶æƒ³æ³•å¯è¡Œæ€§è¯„ä¼° | â€œè¿™ä¸ªè¯¾é¢˜èƒ½ä¸èƒ½åšï¼Ÿæœ‰å“ªäº›å…³é”®å‡è®¾ä¸é£é™©â€ |
| å®éªŒç»“æœå¤ç›˜ | â€œä¸ºä»€ä¹ˆå®éªŒä¸æ”¶æ•›ï¼Ÿä»æ—¥å¿—ä¸è®¾ç½®æ¨æ–­é—®é¢˜â€ |
| å¤šææ–™ç»¼åˆ | â€œæŠŠä¸‰ä»½ç¬”è®°ç»¼åˆæˆä¸€ä¸ªè§‚ç‚¹/æ–¹æ¡ˆ/ä¸‹ä¸€æ­¥è®¡åˆ’â€ |

---

## å…³é”®è§„åˆ™ï¼ˆå¿…é¡»éµå®ˆï¼‰

1. **ä¸ä¼ªé€ å¼•ç”¨/è®ºæ–‡/æ•°æ®**ï¼šå¤–éƒ¨äº‹å®å¿…é¡»å¯æ ¸éªŒï¼Œä¸èƒ½ç¼–é€ æ¥æºã€‚
2. **åŒºåˆ†äº‹å®ä¸æ¨æ–­**ï¼šè¾“å‡ºä¸­å¿…é¡»æœ‰ Claims åˆ†ç±»ã€‚
3. **å¹¶è¡Œå¿…ç­‰å¾…**ï¼šCodex ä¸ Gemini ç»“æœå¿…é¡»åˆ°é½å†ç»¼åˆã€‚
4. **è¾“å‡ºè¦å¯æ‰§è¡Œ**ï¼šè‡³å°‘ç»™å‡º P0/P1/P2 çš„ä¸‹ä¸€æ­¥è¡ŒåŠ¨æ¸…å•ã€‚
5. **å†™å…¥ artifacts + manifest**ï¼šä¿è¯å¯è¿½æº¯ä¸å¯å¤ç°ã€‚
