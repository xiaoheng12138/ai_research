{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://research-workflow-assistant/schemas/evidence.schema.json",
  "title": "Evidence Record Schema",
  "description": "Evidence Gate validation records",
  "type": "object",
  "required": ["task_id", "claims"],
  "properties": {
    "task_id": {
      "type": "string",
      "description": "Related task identifier"
    },
    "run_id": {
      "type": "string",
      "description": "Execution run identifier"
    },
    "created_at": {
      "type": "string",
      "format": "date-time"
    },
    "source_model": {
      "type": "string",
      "enum": ["codex", "gemini"],
      "description": "Model that generated the claims"
    },
    "claims": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["claim_id", "text", "category", "status"],
        "properties": {
          "claim_id": {
            "type": "string"
          },
          "text": {
            "type": "string",
            "description": "The claim statement"
          },
          "category": {
            "type": "string",
            "enum": ["fact", "inference", "speculation"],
            "description": "Claim type classification"
          },
          "status": {
            "type": "string",
            "enum": ["verified", "unverified", "rejected"],
            "description": "Verification status"
          },
          "confidence": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "Confidence score"
          },
          "verification_method": {
            "type": "string",
            "description": "How the claim was verified"
          },
          "sources": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "enum": ["web_search", "semantic_scholar", "kb", "codex_review", "manual"]
                },
                "reference": {
                  "type": "string"
                },
                "url": {
                  "type": "string",
                  "format": "uri"
                }
              }
            }
          },
          "notes": {
            "type": "string"
          }
        }
      }
    },
    "summary": {
      "type": "object",
      "properties": {
        "total": { "type": "integer" },
        "verified": { "type": "integer" },
        "unverified": { "type": "integer" },
        "rejected": { "type": "integer" }
      }
    },
    "to_verify": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Pending verification items"
    }
  }
}
